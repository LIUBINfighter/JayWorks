---
title: Frontmatter Schema
description: JayWorks 内置文档（Docusaurus 风格）当前支持的 MDX Frontmatter 字段说明
order: 90
updated: 2025-09-27
tags: [schema, reference]
---

import { SimpleButton } from '../../components/SimpleButton';

# Frontmatter Schema（参考）

本文档描述当前内置文档系统（Milestone: 多文档 + 分类 + Footer）已经解析/使用的 **MDX frontmatter** 字段。未列出的字段会被完整保留在 `frontmatter` 对象中（供组件或后续功能自行读取），但核心渲染/导航不会使用它们。

## 解析流程概览

1. 使用 `gray-matter` 提取 YAML frontmatter → `frontmatter` 对象
2. 解析字段并写入对应 `DocMeta`：`title / description / category / order / tags / updated`
3. `updated`: 优先使用 `updated`，否则回退到 `date`
4. `tags` 支持数组或以逗号/空白/分号分隔的字符串
5. 未知字段原样透传，可在自定义组件里使用（如 `frontmatter.myCustomFlag`）

## 字段一览

| 字段 | 类型 | 解析到 meta | 作用 | 备注 |
| ---- | ---- | ----------- | ---- | ---- |
| `title` | string | `meta.title` | 页面主标题（也用于默认 navLabel 回退） | 若导航配置里该 doc 没有 `label`，侧边栏显示此标题 |
| `description` | string | `meta.description` | 标题下的简介段落 | 可用于未来搜索摘要 / SEO |
| `category` | string | `meta.category` | 逻辑分组（次级分类） | 与导航 `category` 类型不同：此字段当前仅做展示/潜在过滤占位 |
| `order` | number | `meta.order` | 同一 group / category 内的排序（越小越靠前） | 导航本身的顺序优先；此字段作为二级排序参考（当前实现未强制应用，可后续拓展） |
| `tags` | string[] \| string | `meta.tags` | 关键词标签 | 字符串会被分隔符拆分为数组 |
| `updated` | string (date) | `meta.updated` (timestamp) | 最近更新时间（优先） | 解析失败会忽略并发出 console.warn |
| `date` | string (date) | `meta.updated` (timestamp) | 回退更新时间 | 仅当 `updated` 缺失时才读取 |
| （隐式）`id` | — | `meta.id` | 文档唯一标识 | 来自导航配置；非 frontmatter 字段 |
| （隐式）`slug` | — | `meta.slug` | 未来路由/hash | 当前等于 `id` |
| （导航）`label` | — | `meta.navLabel` | 侧边栏/顶部导航显示名 | 来自导航配置；优先级高于 frontmatter.title |
| （导航）`draft` | boolean | `meta.draft` | 草稿过滤 | 由导航配置控制；frontmatter.draft 暂不生效 |

## 解析优先级

1. 导航配置的 `label` 优先于 frontmatter 内的 `title` 作为侧边栏显示名称。
2. 更新时间：`updated` > `date` > 无（不显示 MetaInfo 中的时间）。
3. 排序：当前实际的导航出现顺序仍取决于 `navigation.ts` 中 `NAV_GROUPS` 与分类/文档声明顺序；`order` 作为后续增强的二级排序保留。

## 使用示例

最小示例：

```mdx
---
title: 快速开始
description: 3 分钟上手 JayWorks 文档视图。
updated: 2025-09-20
tags: quickstart setup
---

<SimpleButton label="点我" />

正文内容……
```

复杂示例（数组 tags + order + category）：

```mdx
---
title: 深入解析渲染管线
description: 讲解 unified + remark + rehype 在本插件内的裁剪与安全策略。
category: pipeline
order: 30
tags:
	- mdx
	- unified
	- security
updated: 2025-09-26
---

正文……
```

字符串形式的 tags 拆分规则示例：

```mdx
---
title: Tags 拆分规则
tags: a,b; c   d   e
---

// 会解析为 ['a','b','c','d','e']
```

## 常见问题 (FAQ)

### 为什么 frontmatter 里加 `draft: true` 没有效果？
当前草稿过滤发生在导航阶段（`navigation.ts`），frontmatter 中的 `draft` 尚未接入。需要隐藏文档请在导航配置里标记。

### 我可以添加自定义字段吗？
可以。所有未被核心解析的字段都会保留在 `frontmatter` 对象中，可在 MDX 内的 React 组件通过上下文或钩子方式访问（视具体实现扩展）。目前示例里尚未暴露直接 hook，后续可添加 `useCurrentDoc()` 暴露。

### `order` 为什么暂未改变显示顺序？
当前以声明式导航的显式顺序为主，`order` 仅为未来可能的自动排序或同级混合排序预留。可在后续需求明确时在 `registry.list()` 中插入排序逻辑。

### 日期格式支持什么？
内部使用 `Date.parse()`，推荐使用 ISO 8601：`YYYY-MM-DD` 或 `YYYY-MM-DDTHH:mm:ssZ`。解析失败会被忽略。

## 未来扩展（占位）

以下字段尚未实现，但在架构上预留方向：

| 字段 | 计划用途 |
| ---- | -------- |
| `version` | 多版本文档分支（与导航组或前缀结合） |
| `locale` | i18n（与语言切换 UI 配合） |
| `sidebar_position` | 更接近 Docusaurus 的排序语义（可能取代 `order`） |
| `keywords` | 搜索/SEO 辅助，独立于 `tags` |
| `pagination_prev` / `pagination_next` | 覆盖默认 Prev/Next 推导 |

> 扩展字段在引入前应：
> 1. 明确作用域（仅 UI / 搜索 / 路由）
> 2. 定义冲突优先级
> 3. 保持与现有 `DocMeta` 兼容（避免破坏旧文档）

## 校验提示

当前未做严格 schema 校验；提供以下软性建议：

- `title` 必填（否则 UI 会使用回退 id）
- `updated` 使用 ISO 日期格式
- `tags` 数组时使用纯字符串
- 避免与未来扩展字段同名的私有字段（如 `version`, `locale`）

## 快速检查清单

- [ ] 有清晰 `title`
- [ ] `description` 不超过 ~120 字（便于搜索摘要）
- [ ] 设置了 `updated`（方便 MetaInfo）
- [ ] tags 合理（≤ 5 个核心标签）
- [ ] 不需要显示的文档已在导航配置里 `draft: true`

## 参考源码位置

- 解析逻辑：`src/docs/registry.ts` (`compile` 函数)
- 元信息类型：`src/docs/types.ts` (`DocMeta` / `DocRecord`)
- 渲染管线：`src/utils/unifiedMdx.tsx`

如需新增字段，请先在 `DocMeta` 中添加，再在 `compile()` 内实现解析，并考虑排序/过滤/显示的影响。

<SimpleButton label="已阅读" />

---
最后更新：2025-09-27

